---
{"dg-publish":true,"dg-path":"xiaodi/WEB攻防_PHP反序列化.md","permalink":"/xiaodi/WEB攻防_PHP反序列化/","title":"WEB攻防_PHP反序列化"}
---

# 什么是序列化
**在编程中，序列化是将对象转换为字节流或其他格式，以便存储或传输的过程，**
**而反序列化则是将这些格式化的数据重新转换回内存中的对象。**

`serialize()`将对象转换成一个字符串
`unserialize()`将字符串还原成一个对象
![Pasted image 20240929150336.png](/img/user/picture/Pasted%20image%2020240929150336.png)
(这里这个对象长度指的是这个对象名称的长度，也就是info是4个字符)


# 常见PHP魔术方法

 `__construct()`
**当对象被创建(new)的时候会自动调用**

`__destruct()`
**当对象被销毁时会被自动调用**
+ 一种是主动销毁(unset)
+ 一种是由系统自动销毁

`__sleep()`
**serialize()执行时被自动调用**

`__wakeup()`
**unserialize()时会被自动调用**

`__invoke()`
**当尝试以调用函数的方法调用一个对象时会被自动调用**

`__toString()`
**把类当作字符串使用时触发**

`__call()`
**调用某个方法,若方法存在,则调用;若不存在,则会去调用__call函数。**

`__callStatic()`
**在静态上下文中调用不可访问的方法时触发**
 
`__get()`
**读取对象属性时,若存在,则返回属性值;若不存在，则会调用__get函数**

`__set()` 
**设置对象的属性时,若属性存在,则赋值;若不存在,则调用__set函数。**

`__isset()`
**在不可访问的 属性上调用isset()或empty()触发**
在正常调用isset()的时候会返回0/1来表示这个属性有没有被设置
但是在调用私有属性之类的不可访问属性时，就会调用类中定义好的`__isset()`函数

`__unset()`
**在不可访问的属性上使用unset()时触发**

`__set_state()`
**调用var_export()导出类时，此静态方法会被调用**

`__clone()`
**当对象复制完成时调用**

`__autoload()`
**尝试加载未定义的类**

`__debugInfo()`
**打印所需调试信息**


# 靶场练习

[[blog/安全/靶场/CTFshow_反序列化1\|CTFshow_反序列化1]]
[[blog/安全/靶场/BUU_[极客大挑战 2019]PHP1\|BUU_[极客大挑战 2019]PHP1]]
